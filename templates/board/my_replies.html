{% extends "base.html" %}
{% block title %}Отклики на мои объявления{% endblock %}
{% block content %}
<h2>Отклики на мои объявления</h2>

<form method="get">
  <label>Статус:
    <select name="status" onchange="this.form.submit()">
      <option value="">— все —</option>
      <option value="pending" {% if request.GET.status == 'pending' %}selected{% endif %}>Ожидает</option>
      <option value="accepted" {% if request.GET.status == 'accepted' %}selected{% endif %}>Принят</option>
      <option value="declined" {% if request.GET.status == 'declined' %}selected{% endif %}>Отклонён</option>
    </select>
  </label>
</form>

<ul>
{% for r in replies %}
  <li>
    <div><strong>{{ r.author.username }}</strong> → <a href="{% url 'board:post_detail' r.post_id %}">{{ r.post.title }}</a></div>
    <div>{{ r.text|linebreaksbr }}</div>
    <div>Статус: {{ r.get_status_display }}</div>
    {% if r.status == 'pending' %}
      <a href="{% url 'board:reply_accept' r.pk %}">Принять</a> |
      <a href="{% url 'board:reply_decline' r.pk %}">Отклонить</a>
    {% endif %}
  </li>
{% empty %}
  <li>Пока нет откликов.</li>
{% endfor %}
</ul>
{% endblock %}
